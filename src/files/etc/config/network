config interface 'loopback'
	option ifname 'lo'
	option ipaddr '127.0.0.1'
	option proto 'static'
	option netmask '255.0.0.0'

config globals 'globals'
	option ula_prefix 'fdc8:c5a0:4e3b::/48'

config interface 'wan'
	option ifname 'eth0.2'
	option proto 'dhcp'

config interface 'lan_vpn1'
	option ifname 'eth0.1'
	option ipaddr '10.154.0.1'
	option netmask '255.255.255.0'
	option proto 'static'
	option type 'bridge'

config interface 'lan_vpn2'
	option ipaddr '10.154.1.1'
	option netmask '255.255.255.0'
	option proto 'static'
	option type 'bridge'

config interface 'lan_vpn3'
	option ipaddr '10.154.2.1'
	option netmask '255.255.255.0'
	option proto 'static'
	option type 'bridge'

config interface 'lan_vpn4'
	option ipaddr '10.154.3.1'
	option netmask '255.255.255.0'
	option proto 'static'
	option type 'bridge'

config interface 'lan_tor'
	option ipaddr '10.154.4.1'
	option netmask '255.255.255.0'
	option proto 'static'
	option type 'bridge'

config interface 'lan_clear1'
	option ipaddr '10.154.5.1'
	option netmask '255.255.255.0'
	option proto 'static'
	option type 'bridge'

config interface 'lan_clear2'
	option ipaddr '10.154.6.1'
	option netmask '255.255.255.0'
	option proto 'static'
	option type 'bridge'

config interface 'lan_local'
	option ipaddr '10.154.7.1'
	option netmask '255.255.255.0'
	option proto 'static'
	option type 'bridge'

config interface 'vpn_1'
	option ifname 'tun1'
	option proto 'none'

config interface 'vpn_2'
	option ifname 'tun2'
	option proto 'none'

config interface 'vpn_3'
	option ifname 'tun3'
	option proto 'none'

config interface 'vpn_4'
	option ifname 'tun4'
	option proto 'none'

config interface 'tor'
	option ifname 'eth0.3'
	option ipaddr '172.31.1.1'
	option netmask '255.255.255.0'
	option proto 'static'

config switch 'eth0'
	option enable_vlan '1'
	option name 'switch0'
	option reset '1'

config switch_vlan 'eth0_1'
	option device 'switch0'
	option ports '1 6t'
	option vlan '1'

config switch_vlan 'eth0_2'
	option device 'switch0'
	option ports '0 6t'
	option vlan '2'

config route 'local_vpn1_traffic'
	option interface 'lan_vpn1'
	option target '10.154.0.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '1'

config route 'vpn2_to_vpn1'
	option interface 'lan_vpn2'
	option target '10.154.1.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '1'

config route 'vpn3_to_vpn1'
	option interface 'lan_vpn3'
	option target '10.154.2.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '1'

config route 'vpn4_to_vpn1'
	option interface 'lan_vpn4'
	option target '10.154.3.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '1'

config route 'tor_to_vpn1'
	option interface 'lan_tor'
	option target '10.154.4.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '1'

config route 'clear1_to_vpn1'
	option interface 'lan_clear1'
	option target '10.154.5.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '1'

config route 'clear2_to_vpn1'
	option interface 'lan_clear2'
	option target '10.154.6.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '1'

config route 'local_to_vpn1'
	option interface 'lan_local'
	option target '10.154.7.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '1'

config route 'local_vpn2_traffic'
	option interface 'lan_vpn2'
	option target '10.154.1.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '2'

config route 'vpn1_to_vpn2'
	option interface 'lan_vpn1'
	option target '10.154.0.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '2'

config route 'vpn3_to_vpn2'
	option interface 'lan_vpn3'
	option target '10.154.2.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '2'

config route 'vpn4_to_vpn2'
	option interface 'lan_vpn4'
	option target '10.154.3.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '2'

config route 'tor_to_vpn2'
	option interface 'lan_tor'
	option target '10.154.4.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '2'

config route 'clear1_to_vpn2'
	option interface 'lan_clear1'
	option target '10.154.5.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '2'

config route 'clear2_to_vpn2'
	option interface 'lan_clear2'
	option target '10.154.6.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '2'

config route 'local_to_vpn2'
	option interface 'lan_local'
	option target '10.154.7.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '2'

config route 'local_vpn3_traffic'
	option interface 'lan_vpn3'
	option target '10.154.2.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '3'

config route 'vpn1_to_vpn3'
	option interface 'lan_vpn1'
	option target '10.154.0.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '3'

config route 'vpn2_to_vpn3'
	option interface 'lan_vpn2'
	option target '10.154.1.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '3'

config route 'vpn4_to_vpn3'
	option interface 'lan_vpn4'
	option target '10.154.3.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '3'

config route 'tor_to_vpn3'
	option interface 'lan_tor'
	option target '10.154.4.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '3'

config route 'clear1_to_vpn3'
	option interface 'lan_clear1'
	option target '10.154.5.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '3'

config route 'clear2_to_vpn3'
	option interface 'lan_clear2'
	option target '10.154.6.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '3'

config route 'local_to_vpn3'
	option interface 'lan_local'
	option target '10.154.7.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '3'

config route 'local_vpn4_traffic'
	option interface 'lan_vpn4'
	option target '10.154.3.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '4'

config route 'vpn1_to_vpn4'
	option interface 'lan_vpn1'
	option target '10.154.0.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '4'

config route 'vpn2_to_vpn4'
	option interface 'lan_vpn2'
	option target '10.154.1.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '4'

config route 'vpn3_to_vpn4'
	option interface 'lan_vpn3'
	option target '10.154.2.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '4'

config route 'tor_to_vpn4'
	option interface 'lan_tor'
	option target '10.154.4.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '4'

config route 'clear1_to_vpn4'
	option interface 'lan_clear1'
	option target '10.154.5.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '4'

config route 'clear2_to_vpn4'
	option interface 'lan_clear2'
	option target '10.154.6.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '4'

config route 'local_to_vpn4'
	option interface 'lan_local'
	option target '10.154.7.0'
	option netmask '255.255.255.0'
	option gateway '0.0.0.0'
	option table '4'
